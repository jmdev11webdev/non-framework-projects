<script>
(async () => {
  const res = await fetch("/me");
  const data = await res.json();

  if (!data.success) {
    window.location.href = "/login.html";
  }
})();
</script>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    
<link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
</head>
<body class="container mt-5">

    <h1>Dashboard</h1>
    <h3 id="userEmail"></h3>
    <p>You are logged in ðŸŽ‰</p>

    <button id="logoutBtn" class="btn btn-danger">Logout</button>

    <script>
    document.getElementById("logoutBtn").addEventListener("click", async () => {
    const res = await fetch("/logout", {
    method: "POST"
    });

    const data = await res.json();

    if (data.success) {
    window.location.href = "/login.html";
    }
    });
    </script>

    <script>
    (async () => {
    const res = await fetch("/me");
    const data = await res.json();

    if (!data.success) {
        window.location.href = "/login.html";
        return;
    }

    document.getElementById("userEmail").textContent =
        `Logged in as: ${data.user.email}`;
    })();
    </script>

</body>
</html>